# ONC_Autonomous_Robot

This repository showcases the code used for a school project in first year engineering at University of Victoria.

## Background
Ocean Networks Canada is a UVic research initiative that uses deep-sea sensors to monitor chemical and biological conditions on the ocean floor. Due to the depth of the sensors, it is necessary for them to be cabled for adequate power and data-retrieval. Unfortunately, cables deteriorate in deep-sea environments and need to be replaced.

Due to the high cost and danger of sending human divers down to recable the sensors, it would be preferable if there was a robot which could navigate the ocean floor to find the sensors and attach new cables. This is where we came in. Our class was divided into groups of 3-4 and tasked with creating prototypes for autonomous cabling robots using VEX Cortex robotics kits. I was lucky enough to have a few mech students in my group that were more than happy to let me take care of all the coding.


## Conceptualization

The prototype was meant to be a proof of concept for beacon location and cable connection. It would be placed in an arena facing away from a target beacon. The robot would then - without any intervention - have to locate the beacon, move toward it, attach a cable (or similar mechanism), and proceed to the edge of the arena without disturbing the cable it had just attached.

We were strongly encouraged to use a switch-case implementation and develop a finite state machine to guide our robot's actions.

![Imgur](https://i.imgur.com/SWFNfqT.jpg)


The FSM itself is fairly self-explanatory; the robot has 8 active states that it switches between based on sensory input and the completion of motor functions. The robot used an accoustic rangefinder and dual infrared sensors for sensory input. The beacon had attached to it, infrared lights flashing at 10Hz. This was to be our means of locating the beacon in order to proceed.

Without going into too much detail about the physical structure, our robot used a two-train locomotive system for movement on a four-wheeled square base. The cable-attachment mechanism used an earth magnet on a heavy-duty string for the sake of simplicity. The magnet was held in a mobile claw which can pinch or retract on command.

![Imgur](https://i.imgur.com/TdUvCiG.png)
![Imgur](https://i.imgur.com/b755B8g.png)


## The Source Code

Most of the code we used on the robot was developed from scratch by myself (perks of being in software engineering when most of your fellow students are going into mechanical or civil), with few exceptions. The #pragma statements at the top of the code were generated by the VEX ROBOTC IDE based on the sensors we were using (entered manually). The functions for monitoring IR sensors (monitorLightL & monitorLightR) are heavily modified versions of code provided for us by the instructor of the course, Dr. Michael McGuire. He is credited within the source code as well, though if there's a formal citation system for code, I'm unaware of it at this time (and please feel free to contact me so I can correct this!). The original monitorLight function was for a single sensor, and simply returned a boolean value if it detected a significant amount of infrared light.

### Structure

Most of the structure of the code is commented in for reading convenience, but I just wanted to highlight a few things.

First, I have to apologize for the formatting. The comments were very well aligned within the IDE required for the VEX cortex. They are also well aligned in my text editor (Atom), but when I uploaded them to github, things suddenly looked strange. I hope it is still readable.

Second, this program contains a lot of global variables. This is because ROBOTC is not an object-oriented language, and robotics tends to use global variables more than conventional programming (or so we were told).

Finally, this code was finalized and handed in around the beginning of April 2017 so while I am just now publishing it to github, unmodified, it does not accurately reflect my current programming capabilities.

With that said, the rest of the code speaks for itself, and I hope it serves some good being on github. Thanks for checking it out!

-Matthew Fortier
